---
title: "测试您的应用程序"
description: "通过嵌入式浏览器查看和精确组件选择实时预览您的 Web 应用程序，实现无缝开发工作流程"
sidebarTitle: "测试您的应用程序"
---

<video
  controls
  className="w-full aspect-video rounded-xl"
  src="https://vkcdn.britannio.dev/showcase/flat-task-panel/vk-onb-companion-demo-3.mp4"
></video>

## 概述

预览模式在 Vibe Kanban 中提供嵌入式浏览器体验,允许您在不离开开发环境的情况下测试和迭代您的 Web 应用程序。此功能通过提供实时预览功能和精确组件选择工具，消除了在浏览器和 Vibe Kanban 之间切换的需要。

**主要优势：**
- **嵌入式查看**：直接在 Vibe Kanban 中查看正在运行的应用程序
- **精确组件选择**：点击选择特定 UI 组件以获得有针对性的反馈
- **开发服务器日志**：在底部使用可展开/可折叠的日志监控开发服务器输出
- **无缝工作流程**：工具之间无需切换上下文

## 设置预览模式

<Steps>
<Step title="配置开发服务器脚本">
  导航到项目设置并配置启动本地开发环境的开发服务器脚本。

  **常见示例：**
  - `npm run dev`（Vite、Next.js）
  - `npm start`（Create React App）
  - `yarn dev`（Yarn 项目）
  - `pnpm dev`（PNPM 项目）

  <Frame>
  <img src="/images/preview-mode-dev-script-config.png" alt="开发服务器脚本配置界面" />
  </Frame>

  <Info>
  您可能还需要配置设置脚本（例如，`npm install`）以在开发服务器启动之前安装依赖项。在项目设置的设置脚本下配置此项。
  </Info>

  <Tip>
  确保您的开发服务器将 URL（例如，`http://localhost:3000`）打印到 stdout/stderr 以进行自动检测。
  </Tip>
</Step>

<Step title="安装 Web Companion">
  对于精确的组件选择，请在应用程序中安装 `vibe-kanban-web-companion` 包。

  <Info>
  **推荐**：使用预览选项卡中的"自动安装 companion"按钮，让 Vibe Kanban 创建一个为您安装和配置 companion 的任务。

  <Frame>
  <img src="/images/preview-mode-install-companion-button.png" alt="预览选项卡中的自动安装 companion 按钮" />
  </Frame>
  </Info>

  **手动安装：**

  将依赖项添加到项目：
  ```bash
  npm install vibe-kanban-web-companion
  ```

  然后将 companion 添加到应用程序：

  <Tabs>
  <Tab title="Create React App">
    添加到 `src/index.js` 或 `src/index.tsx`：
    ```jsx
    import { VibeKanbanWebCompanion } from 'vibe-kanban-web-companion';
    import React from 'react';
    import ReactDOM from 'react-dom/client';
    import App from './App';

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(
      <React.StrictMode>
        <VibeKanbanWebCompanion />
        <App />
      </React.StrictMode>
    );
    ```
  </Tab>

  <Tab title="Next.js">
    添加到 `pages/_app.js` 或 `pages/_app.tsx`：
    ```jsx
    import { VibeKanbanWebCompanion } from 'vibe-kanban-web-companion'
    import type { AppProps } from 'next/app'

    function MyApp({ Component, pageProps }: AppProps) {
      return (
        <>
          <VibeKanbanWebCompanion />
          <Component {...pageProps} />
        </>
      )
    }
    ```
  </Tab>

  <Tab title="Vite">
    添加到 `src/main.jsx` 或 `src/main.tsx`：
    ```jsx
    import { VibeKanbanWebCompanion } from "vibe-kanban-web-companion";
    import React from "react";
    import ReactDOM from "react-dom/client";
    import App from "./App";

    ReactDOM.createRoot(document.getElementById("root")).render(
      <React.StrictMode>
        <VibeKanbanWebCompanion />
        <App />
      </React.StrictMode>
    );
    ```
  </Tab>
  </Tabs>

  <Note>
  Web Companion 会自动从生产构建中 tree-shake，因此它仅在开发模式下运行。
  </Note>
</Step>

<Step title="启动开发服务器">
  在预览部分，点击**启动开发服务器**按钮以启动开发服务器。

  <Frame>
  <img src="/images/preview-mode-start-dev-server.png" alt="从任务界面启动开发服务器" />
  </Frame>

  系统将：
  - 启动您配置的开发脚本
  - 检测您网站的 URL 并加载它
</Step>
</Steps>

## 使用预览模式

### 访问预览

开发服务器运行并检测到 URL 后：

1. 在任务界面中**点击预览按钮**（眼睛图标）
2. 在 iframe 中**查看嵌入的应用程序**
3. 直接在 Vibe Kanban 中**与您的应用互动**

<Frame>
<img src="/images/vk-preview-interface.png" alt="预览模式显示带有工具栏控件的嵌入式应用程序" />
</Frame>

### 预览工具栏控件

预览工具栏提供管理预览体验的基本控件：

<Frame>
<img src="/images/vk-preview-toolbar.png" alt="预览工具栏显示刷新、复制 URL、在浏览器中打开和停止服务器控件" />
</Frame>

- **刷新**：重新加载预览 iframe
- **复制 URL**：将开发服务器 URL 复制到剪贴板
- **在浏览器中打开**：在默认浏览器中打开应用程序
- **停止开发服务器**：停止正在运行的开发服务器

### 开发服务器日志

在预览面板底部，您会找到可展开或折叠的开发服务器日志。这些日志显示来自开发服务器的实时输出，使您可以轻松监控服务器活动、错误和调试信息，而无需离开预览。

<Frame>
<img src="/images/vk-dev-server-logs.png" alt="开发服务器日志显示预览底部的可展开/可折叠日志输出" />
</Frame>

### 组件选择

安装 Web Companion 后，您可以精确选择 UI 组件以获得有针对性的反馈：

<Steps>
<Step title="激活选择模式">
  点击应用程序右下角的浮动 Vibe Kanban companion 按钮以激活组件选择模式。

  <Frame>
  <img src="/images/vk-component-selection.png" alt="组件选择界面显示突出显示的可选元素" />
  </Frame>
</Step>

<Step title="选择组件深度">
  当您点击组件时，Vibe Kanban 会显示从最内层到最外层的组件层次结构。为您的反馈选择适当的级别：

  - **内部组件**：用于特定 UI 元素（按钮、输入）
  - **外部组件**：用于更广泛的部分（卡片、布局）

  <Frame>
  <img src="/images/preview-mode-component-depth.png" alt="组件深度选择显示可选组件的层次结构" />
  </Frame>
</Step>

<Step title="提供有针对性的反馈">
  选择组件后，编写您的后续消息。编程代理将收到：
  - **精确的 DOM 选择器**信息
  - **组件层次结构**和源文件位置
  - 关于要更改什么的**您的具体说明**

  <Check>
  无需描述"右上角的按钮"——代理确切知道您指的是哪个组件！
  </Check>
</Step>
</Steps>

## 故障排除

如果预览未自动加载，请确保您的开发服务器将 URL 打印到 stdout/stderr 以进行自动检测。

支持的 URL 格式：
- `http://localhost:3000`
- `https://localhost:3000`
- `http://127.0.0.1:3000`
- `http://0.0.0.0:5173`

<Note>
使用 `0.0.0.0` 或 `::` 的 URL 会自动转换为 `localhost` 以进行嵌入。
</Note>

## 相关文档

- [新任务尝试](/core-features/new-task-attempts) - 了解任务尝试生命周期
- [审查代码更改](/core-features/reviewing-code-changes) - 分析和审查代码修改
- [配置和自定义](/configuration-customisation/global-settings) - 自定义 Vibe Kanban 设置
