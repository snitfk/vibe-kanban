---
title: "代理配置文件和配置"
description: "为规划、模型和沙箱权限等不同设置配置和自定义编程代理变体"
---

代理配置文件允许您为每个支持的编程代理定义多个命名变体。变体捕获配置差异，如规划模式、模型选择和沙箱权限，您可以在创建尝试时快速选择。

<Info>
代理配置文件在 Vibe Kanban 中运行代理的任何地方使用：入门、默认设置、尝试创建和后续操作。
</Info>

## 配置访问

您可以通过设置 → 代理以两种方式配置代理配置文件：

<Tabs>
<Tab title="表单编辑器">
  使用带有每个代理设置的表单字段的引导界面。

  <Frame>
  <img src="/images/coding-agent-configurations.png" alt="代理配置表单编辑器界面" />
  </Frame>
</Tab>

<Tab title="JSON 编辑器">
  直接编辑底层 `profiles.json` 文件以进行高级配置。

  <Frame>
  <img src="/images/coding-agent-configurations-json.png" alt="代理配置的 JSON 编辑器" />
  </Frame>
</Tab>
</Tabs>

<Note>
配置页面显示存储设置的确切文件路径。Vibe Kanban 仅保存您的覆盖，同时保留内置默认值。
</Note>

## 配置结构

配置文件配置使用包含代理变体的 `executors` 对象的 JSON 结构：

```json profiles.json
{
  "executors": {
    "CLAUDE_CODE": {
      "DEFAULT": { "CLAUDE_CODE": { "dangerously_skip_permissions": true } },
      "PLAN":    { "CLAUDE_CODE": { "plan": true } },
      "ROUTER":  { "CLAUDE_CODE": { "claude_code_router": true, "dangerously_skip_permissions": true } }
    },
    "GEMINI": {
      "DEFAULT": { "GEMINI": { "model": "default", "yolo": true } },
      "FLASH":   { "GEMINI": { "model": "flash",   "yolo": true } }
    },
    "CODEX": {
      "DEFAULT": { "CODEX": { "sandbox": "danger-full-access" } },
      "HIGH":    { "CODEX": { "sandbox": "danger-full-access", "model_reasoning_effort": "high" } }
    }
  }
}
```

<AccordionGroup>
<Accordion title="结构规则">
  - **变体名称**：不区分大小写并规范化为 SCREAMING_SNAKE_CASE
  - **DEFAULT 变体**：保留并始终存在于每个代理
  - **自定义变体**：根据需要添加新变体，如 `PLAN`、`FLASH`、`HIGH`
  - **内置保护**：无法删除内置执行器，但可以覆盖值
</Accordion>

<Accordion title="配置继承">
  - 您的自定义设置会覆盖内置默认值
  - 内置配置仍可用作后备
  - 每个变体包含其代理的完整配置对象
</Accordion>
</AccordionGroup>

## 代理配置选项

<Tabs>
<Tab title="CLAUDE_CODE">
  <ParamField path="plan" type="boolean">
  为复杂任务启用规划模式
  </ParamField>

  <ParamField path="claude_code_router" type="boolean">
  跨多个 Claude Code 实例路由请求
  </ParamField>

  <ParamField path="dangerously_skip_permissions" type="boolean">
  跳过权限提示（谨慎使用）
  </ParamField>

  [查看完整 CLI 参考 →](https://docs.anthropic.com/en/docs/claude-code/cli-reference#cli-flags)
</Tab>

<Tab title="GEMINI">
  <ParamField path="model" type="string">
  选择模型变体：`"default"` 或 `"flash"`
  </ParamField>

  <ParamField path="yolo" type="boolean">
  无需确认运行
  </ParamField>

  [查看完整 CLI 参考 →](https://google-gemini.github.io/gemini-cli/)
</Tab>

<Tab title="AMP">
  <ParamField path="dangerously_allow_all" type="boolean">
  允许所有操作而不受限制（不安全）
  </ParamField>

  [查看完整文档 →](https://ampcode.com/manual#cli)
</Tab>

<Tab title="CODEX">
  <ParamField path="sandbox" type="string">
  执行环境：`"read-only"`、`"workspace-write"` 或 `"danger-full-access"`
  </ParamField>

  <ParamField path="approval" type="string">
  批准级别：`"untrusted"`、`"on-failure"`、`"on-request"` 或 `"never"`
  </ParamField>

  <ParamField path="model_reasoning_effort" type="string">
  推理深度：`"low"`、`"medium"` 或 `"high"`
  </ParamField>

  <ParamField path="model_reasoning_summary" type="string">
  摘要样式：`"auto"`、`"concise"`、`"detailed"` 或 `"none"`
  </ParamField>

  [查看完整文档 →](https://github.com/openai/codex)
</Tab>

<Tab title="CURSOR">
  <ParamField path="force" type="boolean">
  强制执行而不确认
  </ParamField>

  <ParamField path="model" type="string">
  指定要使用的模型
  </ParamField>

  [查看完整 CLI 参考 →](https://docs.cursor.com/en/cli/reference/parameters)
</Tab>

<Tab title="OPENCODE">
  <ParamField path="model" type="string">
  指定要使用的模型
  </ParamField>

  <ParamField path="agent" type="string">
  选择代理类型
  </ParamField>

  [查看完整文档 →](https://opencode.ai/docs/cli/#flags-1)
</Tab>

<Tab title="QWEN_CODE">
  <ParamField path="yolo" type="boolean">
  无需确认运行
  </ParamField>

  [查看完整文档 →](https://qwenlm.github.io/qwen-code-docs/en/cli/index)
</Tab>

<Tab title="DROID">
  <ParamField path="autonomy" type="string">
  权限级别：`"normal"`、`"low"`、`"medium"`、`"high"` 或 `"skip-permissions-unsafe"`
  </ParamField>

  <ParamField path="model" type="string">
  指定要使用的模型
  </ParamField>

  <ParamField path="reasoning_effort" type="string">
  推理深度：`"off"`、`"low"`、`"medium"` 或 `"high"`
  </ParamField>

  [查看完整文档 →](https://docs.factory.ai/factory-cli/getting-started/overview)
</Tab>
</Tabs>

### 通用选项

这些选项适用于多种代理类型：

<ParamField path="append_prompt" type="string | null">
追加到系统提示的文本
</ParamField>

<ParamField path="base_command_override" type="string | null">
覆盖底层 CLI 命令
</ParamField>

<ParamField path="additional_params" type="string[] | null">
要传递的其他 CLI 参数
</ParamField>

<Warning>
以"dangerously_"为前缀的选项会绕过安全确认并可以执行破坏性操作。请极其谨慎地使用。
</Warning>

## 使用代理配置

<CardGroup cols={2}>
<Card title="默认配置" icon="gear">
  在**设置 → 常规 → 默认代理配置**中设置默认代理和变体，以在所有尝试中实现一致的行为。
</Card>

<Card title="每次尝试选择" icon="rocket">
  在尝试对话框中通过选择不同的代理/变体组合创建尝试时覆盖默认值。
</Card>
</CardGroup>

## 相关配置

<Note>
MCP（模型上下文协议）服务器在**设置 → MCP 服务器**下单独配置，但与代理配置文件一起工作以扩展功能。
</Note>

<CardGroup cols={2}>
<Card title="MCP 服务器配置" icon="server" href="/integrations/mcp-server-configuration">
  在 Vibe Kanban 中为编程代理配置 MCP 服务器
</Card>

<Card title="Vibe Kanban MCP 服务器" icon="plug" href="/integrations/vibe-kanban-mcp-server">
  将外部 MCP 客户端连接到 Vibe Kanban 的 MCP 服务器
</Card>
</CardGroup>
